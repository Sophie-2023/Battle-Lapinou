using System.Collections;
using Unity.VisualScripting;
using UnityEngine;

public class B_Invulnerability : MonoBehaviour, SpecialAttack
{
    private float invulnerabilityDuration = 5f;
    private bool isInvulnerable = false;
    // Start is called once before the first execution of Update after the MonoBehaviour is created
    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        
    }

    public void Execute(Entity entityself)
    {
        Debug.Log("Attaque spéciale : Armure invincible !");
        //L'unité devient temporairement invulnérable
        StartCoroutine(invulnerabilityCoroutine(entityself));
    }

    IEnumerator invulnerabilityCoroutine(Entity entityself)
    {
        if (!isInvulnerable)
        {
            isInvulnerable = true;
            int def = entityself.GetDef();
            entityself.SetDef(999999999);
            yield return new WaitForSeconds(invulnerabilityDuration);
            entityself.SetDef(def);
            isInvulnerable = false;
        }
    }
}
